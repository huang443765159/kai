function preLoadSource(){function a(){startPage()}function c(){boi.loading.onProgress&&boi.loading.onProgress(preloader.progress),boi.loading.progress=preloader.progress}function d(){function b(){startPage()}if(console.log("已加载完毕全部资源"),boi.config.onLoaded?boi.config.onLoaded(b):startPage(),boi.preload.listAfter&&boi.preload.listAfter.length>0){var c=new createjs.LoadQueue;c.loadManifest(boi.preload.listAfter)}}function e(a){console.log("加载出错！",a.text)}if(boi.preload.list.length<=0){if(console.log("预加载列表为空，不加载.."),boi.config.onLoaded?boi.config.onLoaded(a):startPage(),boi.preload.listAfter&&boi.preload.listAfter.length>0){var b=new createjs.LoadQueue;b.loadManifest(boi.preload.listAfter)}}else preloader=new createjs.LoadQueue,preloader.on("progress",c),preloader.on("complete",d),preloader.on("error",e),preloader.loadManifest(boi.preload.list)}function startPage(){function b(){"XIA_SHANG"==boi.defaultPage.shiftMotionType?TweenLite.to($("#loading"),.5,{autoAlpha:0,y:-180,ease:Power3.easeIn,onComplete:function(){$("#loading").css("display","none"),$("#loading").remove()}}):TweenLite.to($("#loading"),.3,{autoAlpha:0,ease:Linear.easeOut,onComplete:function(){$("#loading").css("display","none"),$("#loading").remove()}}),boi.bg.onInit&&boi.bg.onInit(),$("#bg").show(),boi.front.onInit&&boi.front.onInit(),$("#front").show(),boi.config.onShow&&boi.config.onShow(),$("#pages").show(),boi.defaultPage.templateId&&boi.defaultPage.pageId&&("XIA_SHANG"==boi.defaultPage.shiftMotionType?shiftPage(boi.defaultPage.templateId,boi.defaultPage.pageId,boi.defaultPage.constructor,null,boi.defaultPage.shiftMotionType):shiftPage(boi.defaultPage.templateId,boi.defaultPage.pageId,boi.defaultPage.constructor,null,"FADE")),boi.defaultFloatPage.templateId&&boi.defaultFloatPage.pageId&&setTimeout(addFloatPage,500,boi.defaultFloatPage.templateId,boi.defaultFloatPage.pageId,boi.defaultFloatPage.constructor)}b()}function motion_bo(a){function b(){TweenLite.to(a,1,{scale:1,ease:Elastic.easeOut,overwrite:1})}TweenLite.to(a,.2,{scale:.92,ease:Cubic.easeOut,overwrite:1,onComplete:b})}function motion_anxia(a){function b(){TweenLite.to(a,.3,{scale:1,ease:Cubic.easeOut,overwrite:1})}TweenLite.to(a,.2,{scale:.95,ease:Cubic.easeOut,overwrite:1,onComplete:b})}function shanshan(a){function b(){TweenLite.to(a,.1,{opacity:1,ease:Linear.easeOut,onComplete:c,overwrite:1})}function c(){TweenLite.to(a,.1,{opacity:0,ease:Linear.easeOut,onComplete:d,overwrite:1})}function d(){TweenLite.to(a,.1,{opacity:1,ease:Linear.easeOut,overwrite:1})}a.css("opacity",0),b()}function openTrackWindow(){"none"!=boi.config.resizeType&&(trackWindow(),$(window).bind("resize",trackWindow))}function closeTrackWindow(){"none"!=boi.config.resizeType&&$(window).unbind("resize",trackWindow)}function trackWindow(){var b,c,a=boi.config.resizeType;switch(windowWidth=$(window).width(),windowHeight=$(window).height(),b=boi.config.contentWidth/boi.config.contentHeight,c=windowWidth/windowHeight,a){case"contain":boi.config.contentScale=b>=c?windowWidth/boi.config.contentWidth:windowHeight/boi.config.contentHeight,$("#mainContainer").css("transform","scale("+boi.config.contentScale+")"),boi.mainContainer.x=Math.round((windowWidth-boi.config.contentWidth*boi.config.contentScale)/2),boi.mainContainer.y=Math.round((windowHeight-boi.config.contentHeight*boi.config.contentScale)/2),$("#mainContainer").css("left",boi.mainContainer.x),$("#mainContainer").css("top",boi.mainContainer.y);break;case"cover":boi.config.contentScale=b>=c?windowHeight/boi.config.contentHeight:windowWidth/boi.config.contentWidth,$("#mainContainer").css("transform","scale("+boi.config.contentScale+")"),boi.mainContainer.x=Math.round((windowWidth-boi.config.contentWidth*boi.config.contentScale)/2),boi.mainContainer.y=Math.round((windowHeight-boi.config.contentHeight*boi.config.contentScale)/2),$("#mainContainer").css("left",boi.mainContainer.x),$("#mainContainer").css("top",boi.mainContainer.y);break;case"width":boi.config.contentScale=windowWidth/boi.config.contentWidth,$("#mainContainer").css("transform","scale("+boi.config.contentScale+")"),boi.config.contentHeight=windowHeight/boi.config.contentScale,$("#mainContainer").css("height",boi.config.contentHeight+"px")}}function shiftPage(a,b,c,d,e){function p(){function a(){s(),b()}function b(){$("#pages").append(i),l=0,$(i).css("opacity",l),n=1,TweenLite.to($(i),.6,{css:{opacity:n},ease:Linear.easeOut,onComplete:r,overwrite:1}),c&&c(d)}h?(j=0,TweenLite.to(h,.6,{css:{opacity:j},ease:Linear.easeOut,overwrite:1,onComplete:a})):a()}function q(){function g(){h&&TweenLite.to(h,1.2,{css:{top:k},ease:Cubic.easeInOut,onComplete:s,overwrite:1}),$("#pages").append(i),$(i).css("top",m),TweenLite.to($(i),1.2,{css:{top:o},ease:Cubic.easeInOut,onComplete:r,overwrite:1}),c&&c(d)}var b,f,a=$("body").scrollTop();a||(a=$("html").scrollTop()),b=($(window).height()-boi.mainContainer.y)/boi.config.contentScale,h&&$(h).css("top",-a/boi.config.contentScale+"px"),$("body").scrollTop(0),$("html").scrollTop(0),"XIA_SHANG"==e?(h&&(k=numCalculation($(h).css("top"),-b)),m=b+"px",o="0px",g()):(h&&(k=b),m=-b+"px",o="0px",$(i).css("z-index",0),$(h).css("z-index",1),f=$(h).position().top,0!=f?TweenLite.to(h,Math.abs(f)/600/boi.config.contentScale,{top:0,ease:Cubic.easeOut,onComplete:g,overwrite:1}):g())}function r(){}function s(){$(h).remove()}var f,g,h,i,j,k,l,m,n,o;if(!a)return alert("必须传入新页面的templateId"),void 0;b||(b=a),f=-1;for(g in pages)$(pages[g]).attr("templateId")==a&&(f=g);return-1==f?(alert("没有对应的页面模版"),void 0):(e||(e="XIA_SHANG"),currentPageId&&(h=$("#"+currentPageId)),i=pages[f].cloneNode(!0),b&&($(i).attr("id",b),$(i).attr("data-airx-id",b)),"XIA_SHANG"==e||"SHANG_XIA"==e?q():"FADE"==e?p():alert("motionType 参数有误"),currentPageId=b,void 0)}function addFloatPage(a,b,c,d,e,f){function m(){var a=$(j).height();"UP"==f?(TweenLite.from($(j),.5,{autoAlpha:0,y:a,ease:Quart.easeOut,overwrite:1}),TweenLite.to($(l),.6,{autoAlpha:1,ease:Linear.easeOut,overwrite:1,delay:.5})):"DOWN"==f?(TweenLite.from($(j),.4,{autoAlpha:0,y:-a,ease:Cubic.easeOut,overwrite:1}),TweenLite.to($(l),.5,{autoAlpha:1,ease:Linear.easeOut,overwrite:1,delay:.5})):"UP_BACK"==f?(TweenLite.from($(j),.6,{autoAlpha:0,y:300,ease:Back.easeOut,overwrite:1}),TweenLite.to($(l),.6,{autoAlpha:1,ease:Linear.easeOut,overwrite:1,delay:.5})):"DOWN_BACK"==f?(TweenLite.from($(j),.6,{autoAlpha:0,y:-300,ease:Back.easeOut,overwrite:1}),TweenLite.to($(l),.6,{autoAlpha:1,ease:Linear.easeOut,overwrite:1,delay:.5})):"FADE_IN"==f?(TweenLite.from($(j),.6,{autoAlpha:0,ease:Linear.easeOut,overwrite:1}),TweenLite.to($(l),.6,{autoAlpha:1,ease:Linear.easeOut,overwrite:1,delay:.5})):alert("motionType 参数有误")}function n(){"UP"==f?outFloatPage(b,null,"DOWN"):"DOWN"==f?outFloatPage(b,null,"UP"):"UP_BACK"==f?outFloatPage(b,null,"BACK_UP"):"DOWN_BACK"==f?outFloatPage(b,null,"BACK_DOWN"):"FADE_IN"==f&&outFloatPage(b,null,"FADE_OUT"),$(k).unbind("click",n),$(i).find(".closeBtn").unbind("click",n)}var g,h,i,j,k,l;if(!a)return alert("必须传入新浮层页的templateId"),void 0;b||(b=a),g=-1;for(h in floatPages)$(floatPages[h]).attr("templateId")==a&&(g=h);return-1==g?(alert("没有对应的浮层"),void 0):(f||(f="UP_BACK"),e&&clearFloatPage(),i=floatPages[g].cloneNode(!0),j=$(i).children(".main"),k=$(i).children(".background"),l=$(i).find(".closeBtn"),$("#floatPages").append(i),$(j).css("visibility","hidden"),$(k).css("visibility","hidden"),$(l).css("visibility","hidden"),b&&($(i).attr("id",b),$(i).attr("data-airx-id",b)),TweenLite.to($(k),.5,{autoAlpha:1,ease:Linear.easeOut,overwrite:1}),setTimeout(m,100),$("#floatPages").css("display","block"),c&&c(d),$(k).on("click",n),$(i).find(".closeBtn").on("click",n),$("body").css("overflow","hidden"),void 0)}function outFloatPage(a,b,c){function i(){$(d).remove(),$("#floatPages").children().length<1&&($("#floatPages").css("display","none"),$("#floatPages").empty()),b&&b()}var d,e,f,g,h;c||(c="BACK_UP"),d=$("#floatPages").children("#"+a),e=$(d).children(".main"),f=$(d).children(".background"),g=$(d).find(".closeBtn"),h=$(e).height(),"UP"==c?(TweenLite.to($(e),.5,{autoAlpha:0,y:-h,ease:Quart.easeOut,overwrite:1}),TweenLite.to($(g),.6,{autoAlpha:0,ease:Linear.easeOut,overwrite:1})):"DOWN"==c?(TweenLite.to($(e),.5,{autoAlpha:0,y:h,ease:Quart.easeOut,overwrite:1}),TweenLite.to($(g),.6,{autoAlpha:0,ease:Linear.easeOut,overwrite:1})):"BACK_UP"==c?(TweenLite.to($(e),.6,{autoAlpha:0,y:-300,ease:Back.easeIn,overwrite:1}),TweenLite.to($(g),.6,{autoAlpha:0,ease:Linear.easeOut,overwrite:1})):"BACK_DOWN"==c?(TweenLite.to($(e),.6,{autoAlpha:0,y:300,ease:Back.easeIn,overwrite:1}),TweenLite.to($(g),.6,{autoAlpha:0,ease:Linear.easeOut,overwrite:1})):"FADE_OUT"==c&&(TweenLite.to($(e),.6,{autoAlpha:0,ease:Linear.easeOut,overwrite:1}),TweenLite.to($(g),.6,{autoAlpha:0,ease:Linear.easeOut,overwrite:1})),TweenLite.to($(f),.6,{autoAlpha:0,ease:Linear.easeOut,overwrite:1,onComplete:i}),$("body").css("overflow","scroll")}function clearFloatPage(){$("#floatPages").empty(),$("#floatPages").css("display","none")}function getWxConfig(a,b,c){console.log("getWxConfig"),$.ajax({url:"https://campaign.boi-ad.com/wechat_jssdk_api/wx_share.php",type:"GET",data:{url:a},dataType:"json",success:function(a){b&&b(a)},error:function(a){c&&c(a)}})}function initWx(a,b,c,d){console.log("开始激活微信JSSDK"),wx.config({debug:!1,appId:a,timestamp:b,nonceStr:c,signature:d,jsApiList:["checkJsApi","updateAppMessageShareData","updateTimelineShareData","onMenuShareAppMessage","onMenuShareTimeline","onMenuShareWeibo","hideMenuItems"],openTagList:["wx-open-launch-weapp"]}),wx.ready(function(){console.log("激活微信JSSDK - 成功"),wx.updateAppMessageShareData({title:boi.shareInfo.appMessage.title?boi.shareInfo.appMessage.title:boi.shareInfo.default.title,desc:boi.shareInfo.appMessage.desc?boi.shareInfo.appMessage.desc:boi.shareInfo.default.desc,link:boi.shareInfo.appMessage.link?boi.shareInfo.appMessage.link:boi.shareInfo.default.link,imgUrl:boi.shareInfo.appMessage.imgUrl?boi.shareInfo.appMessage.imgUrl:boi.shareInfo.default.imgUrl,success:function(){_hmt.push(["_trackEvent",boi.monitor.pageRoot,"分享","好友","成功"])},cancel:function(){_hmt.push(["_trackEvent",boi.monitor.pageRoot,"分享","好友","取消"])}}),wx.updateTimelineShareData({title:boi.shareInfo.timeline.title?boi.shareInfo.timeline.title:boi.shareInfo.default.title,link:boi.shareInfo.timeline.link?boi.shareInfo.timeline.link:boi.shareInfo.default.link,imgUrl:boi.shareInfo.timeline.imgUrl?boi.shareInfo.timeline.imgUrl:boi.shareInfo.default.imgUrl,success:function(){_hmt.push(["_trackEvent",boi.monitor.pageRoot,"分享","朋友圈","成功"])},cancel:function(){_hmt.push(["_trackEvent",boi.monitor.pageRoot,"分享","朋友圈","取消"])}}),wx.onMenuShareWeibo({title:boi.shareInfo.weibo.title?boi.shareInfo.weibo.title:boi.shareInfo.default.title,desc:boi.shareInfo.weibo.desc?boi.shareInfo.weibo.desc:boi.shareInfo.default.desc,link:boi.shareInfo.weibo.link?boi.shareInfo.weibo.link:boi.shareInfo.default.link,imgUrl:boi.shareInfo.weibo.imgUrl?boi.shareInfo.weibo.imgUrl:boi.shareInfo.default.imgUrl,success:function(){_hmt.push(["_trackEvent",boi.monitor.pageRoot,"分享","微博","成功"])},cancel:function(){_hmt.push(["_trackEvent",boi.monitor.pageRoot,"分享","微博","取消"])}}),boi.config.onShareReady&&boi.config.onShareReady(),wx.hideMenuItems({menuList:["menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:QZone","menuItem:editTag","menuItem:delete","menuItem:originPage","menuItem:readMode","menuItem:openWithQQBrowser","menuItem:openWithSafari","menuItem:share:email","menuItem:share:brand"]})}),wx.error(function(a){console.log("激活微信JSSDK - 失败",a)})}var preloader,pages=new Array,floatPages=new Array,currentPageId="",boi={},windowWidth=$(window).width(),windowHeight=$(window).height();boi.config={onInit:null,onShareReady:null,onLoaded:null,onShow:null,contentWidth:375,contentHeight:724,resizeType:"none",contentScale:1,siteUrl:"",apiUrl:""},boi.mainContainer={x:0,y:0},boi.shareInfo={"default":{title:"",link:"",imgUrl:""},appMessage:{title:"",desc:"",link:"",imgUrl:""},timeline:{title:"",link:"",imgUrl:""},weibo:{title:"",desc:"",link:"",imgUrl:""}},boi.defaultPage={templateId:"",pageId:"",shiftMotionType:"FADE",constructor:null},boi.defaultPageLocal={templateId:"",pageId:"",shiftMotionType:"",constructor:null},boi.defaultFloatPage={templateId:"",pageId:"",constructor:null},boi.preload={list:[],listExclude:[],listAdd:[],listAfter:[]},boi.loading={onInit:null,onProgress:null,onComplete:null,progress:0},boi.bg={onInit:null},boi.front={onInit:null},boi.monitor={pageRoot:""},window.onload=function(){function h(a){var c,b=!1;for(c in boi.preload.list)boi.preload.list[c].src==a&&(b=!0);return b}var a,b,c,d,e,f,g,i;console.log("window.load"),$("#mainContainer").css("width",boi.config.contentWidth+"px"),$("#mainContainer").css("height",boi.config.contentHeight+"px"),$("#front").css("display","none"),$("#pages").css("display","none"),$("#floatPages").css("display","none"),$("img").crossOrigin="*",boi.config.onInit&&boi.config.onInit(),a=$("div").toArray(),a.push($("input").toArray()),a.push($("select").toArray());for(b in a)$(a[b]).css("background-image")&&"none"!=$(a[b]).css("background-image")&&$(a[b]).css("background-image").indexOf("url(")>-1&&(c=$(a[b]).css("background-image"),c=c.replace('url("',"").replace('")',""),c=c.replace("url('","").replace("')",""),c=c.replace("url(","").replace(")",""),h(c)||(d={},d.src=c,boi.preload.list.push(d)));e=$("img").toArray();for(b in e)c=e[b].src,h(c)||(d={},d.src=c,boi.preload.list.push(d));if(boi.preload.listExclude&&boi.preload.listExclude.length>0)for(f=boi.preload.list.length-1;f>=0;f--)-1!=boi.preload.listExclude.indexOf(boi.preload.list[f])&&boi.preload.list.splice(f,1);if(boi.preload.listAdd&&boi.preload.listAdd.length>0)for(g in boi.preload.listAdd)c=boi.preload.listAdd[g],h(c)||(d={},d.src=c,boi.preload.list.push(d));pages=$("#pages").children("div").toArray(),$("#pages").empty(),floatPages=$("#floatPages").children("div").toArray(),$("#floatPages").empty(),openTrackWindow(),checkLocal()&&(boi.defaultPageLocal.templateId&&(boi.defaultPage.templateId=boi.defaultPageLocal.templateId),boi.defaultPageLocal.pageId&&(boi.defaultPage.pageId=boi.defaultPageLocal.pageId),boi.defaultPageLocal.constructor&&(boi.defaultPage.constructor=boi.defaultPageLocal.constructor),boi.defaultPageLocal.shiftMotionType&&(boi.defaultPage.shiftMotionType=boi.defaultPageLocal.shiftMotionType)),boi.loading.onInit&&boi.loading.onInit(),preLoadSource(),checkLocal()||(i=window.location.href,getWxConfig(i,function(a){console.log("config数据 获取成功"),initWx(a.data.appId,a.data.timestamp,a.data.nonceStr,a.data.signature)},function(a){console.log("config数据 接口访问失败！",a)}))};