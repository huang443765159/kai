"use strict";function IsPC(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=!0,r=0;r<e.length;r++)if(t.indexOf(e[r])>0){a=!1;break}return a}function isWeiXin(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}function checkLocal(){return"127.0.0.1"==location.host.substring(0,location.host.indexOf(":"))||""==location.host||"localhost"==location.host}function alphaObject(t,e){$(t).css("opacity",e),$(t).css("filter","alpha(opacity="+100*e+")"),$(t).css("-moz-opacity",e)}function scaleObject(t,e,a){if(!t||!e)return void console.log("scaleObject时，object和scaleX不能为空");var r="";r=a?"scale("+e+","+a+")":"scale("+e+")",$(t).css("transform",r),$(t).css("-webkit-transform",r),$(t).css("-moz-transform",r),$(t).css("-ms-transform",r),$(t).css("-o-transform",r)}function isOwnEmpty(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function isEmpty(t){for(var e in t)return!1;return!0}function getActionStr(t,e,a){return randomString(2)+t+randomString(7)+e+randomString(5)+a+randomString(3)}function transformTimeStr(t){var e=Math.floor(t/60),a=t%60;return e<10&&(e="0"+e),a<10&&(a="0"+a),e+":"+a}function transformPercent(t){return Math.floor(100*t)+"%"}function randomString(t){t=t||32;var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=e.length,r="";for(i=0;i<t;i++)r+=e.charAt(Math.floor(Math.random()*a));return r}function checkUserName(t){return!!/^(\w|[\u4E00-\u9FA5])*$/.test(t)}function checkStrIsCN(t){return!!/^[\u4E00-\u9FA5]+$/.test(t)}function checkEmail(t){return!!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)}function checkInputValue(t,e){var a=$(t).attr("defaultValue"),r=$(t).val();alert("defaultValue:"+a),alert("value:"+r);var n=!0;return n=a==r||""==r,"email"==e?n?(alert("请输入邮箱地址"),!1):!!checkStringType(r,e)||(alert("邮箱地址不符合规定"),!1):"phone"==e?n?(alert("请输入手机号码（11位纯数字）"),!1):!!checkStringType(r,e)||(alert("手机号码不符合规定（11位纯数字）"),!1):"username"==e?n?(alert("请输入用户名"),!1):!!checkStringType(r,e)||(alert("用户名必须为2-10位中文/英文/数字/下划线"),!1):"zhongwen"==e?n?(alert("请输入中文内容"),!1):!!checkStringType(r,e)||(alert("输入内容必须为中文字符"),!1):"name"==e?n?(alert("请输入您的姓名"),!1):!!checkStringType(r,e)||(alert("姓名必须为2-10位中文/英文"),!1):"lastName"==e?n?(alert("请输入您的姓氏"),!1):!!checkStringType(r,e)||(alert("姓氏必须为20字以内的中文/英文"),!1):"firstName"==e?n?(alert("请输入您的名字"),!1):!!checkStringType(r,e)||(alert("名字必须为20字以内的中文/英文"),!1):"verifyCode"==e?n?(alert("请输入验证码"),!1):!!checkStringType(r,e)||(alert("请输入正确的验证码"),!1):"identificationCard"==e?n?(alert("请输入身份证号码"),!1):!!checkStringType(r,e)||(alert("请输入正确的身份证号码"),!1):"tel"==e?n?(alert("请输入电话号码"),!1):!!checkStringType(r,e)||(alert("请输入正确的电话号码"),!1):"carNumber"==e?n?(alert("请输入车牌号"),!1):!!checkStringType(r,e)||(alert("车牌号格式有误"),!1):!n||(alert("请输入完整的信息"),!1)}function checkStringType(t,e){if(!t||t.length<=0)return!1;var a;return"email"==e?(a=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,a.test(t)):"phone"==e?!isNaN(t)&&11==t.length:"phone_TW"==e?!isNaN(t)&&10==t.length:"postcode_TW"==e?!(isNaN(t)||t.length<3||t.length>5):"username"==e?!(t.length<2||t.length>10)&&(a=/^(\w|[\u4E00-\u9FA5])*$/,a.test(t)):"zhongwen"==e?(a=/^[\u4E00-\u9FA5]+$/,a.test(t)):"name"==e?!(t.length<2||t.length>10)&&(a=/^[\u4E00-\u9FA5a-zA-Z. ]+$/,a.test(t)):"lastName"==e?!(t.length>20)&&(a=/^[\u4E00-\u9FA5a-zA-Z. ]+$/,a.test(t)):"firstName"==e?!(t.length>20)&&(a=/^[\u4E00-\u9FA5a-zA-Z. ]+$/,a.test(t)):"verifyCode"==e?4==t.length||6==t.length:"identificationCard"==e?(16==t.length||18==t.length)&&(a=/^\d{17}[\dX]$/,a.test(t)):"tel"==e?!(t.length<7||t.length>11)&&(a=/^0[\d]{2,3}-[\d]{7,8}$/,a.test(t)):"carNumber"!=e||7==t.length&&(a=/^([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z1-3]{1}[A-Z0-9]{4}[A-Z0-9港澳领学警]{1}[A-Z0-9]?)|([A-Z]{2}[A-Z0-9]{5})$/,a.test(t))}function numCalculation(t,e){var a;return t.indexOf("%")>0?a="%":t.indexOf("px")>0&&(a="px"),parseInt(t.replace(a,""))+e+a}function hideObj(t){$(t).css("display","none")}function getRequest(){var t=location.search,e=new Object;if(-1!=t.indexOf("?")){var a=t.substr(1);strs=a.split("&");for(var r=0;r<strs.length;r++)e[strs[r].split("=")[0]]=unescape(strs[r].split("=")[1])}return e}function getQueryString(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null}function snapPic(t,e,a,r,n){var i=n||"dataUrl";a||(a=t.style.width()),r||(r=t.style.height()),html2canvas(t,{allowTaint:!0,taintTest:!0,width:a,height:r,onrendered:function(t){t.crossOrigin="*";var a=t.toDataURL("image/jpeg");if(e)if("img"==i){var r=document.createElement("img");r.src=a,e(r)}else e(a)}})}function drowImgII(t,e,a){var r=t.naturalWidth,n=t.naturalHeight,i=t.width,o=t.height,h=document.createElement("canvas"),s=h.getContext("2d");if(i>o){h.width=o,h.height=o;var l=n/o;s.drawImage(t,e*l,0,n,n,0,0,o,o)}else{h.width=i,h.height=i;var l=r/i;s.drawImage(t,0,e*l,r,r,0,0,i,i)}var g=h.toDataURL("image/jpeg");a&&a(g)}function snapPage(){html2canvas(document.body,{allowTaint:!0,taintTest:!1,onrendered:function(t){var e=t.toDataURL(),a=document.createElement("img");a.src=e,document.getElementById("page1").appendChild(a)}})}function shiftContent(t,e){e.empty(),e.load(t)}function loadImg(t,e,r,n){var i=0,o=0,h="[object Object]"===Object.prototype.toString.call(t),t=h?t.get():t;for(a in t){var s=h?$(t[a]).attr("data-src"):t[a];!function(a,h){var s=new Image;s.onload=function(){i++,e&&e(i,t.length,a,h),r&&i==t.length&&r(o)},s.onerror=function(){i++,o++,n&&n(i,t.length,a,h)},s.src=a}(s,t[a])}}function phoneXXXX(t){if(t.length>3){if(t.length>7)var e=t.substring(7,t.length-1);return t=t.substr(0,3)+"XXXX".substr(0,t.length-3),e&&(t+=e),t}return t}function inputBind(t){function e(){this.value==this.defaultValue&&(this.value="")}function a(){""==this.value&&(this.value=this.defaultValue)}t.bind({focus:e,blur:a})}function getTime(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();a<10&&(a="0"+String(a)),t.date<10&&(r="0"+String(r));var n=t.getHours(),i=t.getMinutes(),o=t.getSeconds();return n<10&&(n="0"+String(n)),i<10&&(i="0"+String(i)),o<10&&(o="0"+String(o)),e+"-"+a+"-"+r+" "+n+":"+i+":"+o}function getRandomOne(t){return t[Math.floor(Math.random()*(t.length-1e-6))]}function randomArray(t){return t.sort(function(){return Math.random()>.5?-1:1}),t}function rotate(t,e,a){var r,n=document.getElementById(t);if(n.angle=a?e:((void 0==n.angle?0:n.angle)+e)%360,n.angle>=0)var i=Math.PI*n.angle/180;else var i=Math.PI*(360+n.angle)/180;var o=Math.cos(i),h=Math.sin(i);if(document.all&&!window.opera){var s=document.createElement("img");s.src=n.src,s.height=n.height,s.width=n.width,s.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+o+",M12="+-h+",M21="+h+",M22="+o+",SizingMethod='auto expand')"}else{var s=document.createElement("canvas");n.oImage?(s.oImage=n.oImage,r=750/s.oImage.width,s.oImage.width=s.oImage.width*r,s.oImage.height=s.oImage.height*r):(s.oImage=new Image,s.oImage.src=n.src,r=750/s.oImage.width,s.oImage.width=s.oImage.width*r,s.oImage.height=s.oImage.height*r),s.style.width=s.width=Math.abs(o*s.oImage.width)+Math.abs(h*s.oImage.height),s.style.height=s.height=Math.abs(o*s.oImage.height)+Math.abs(h*s.oImage.width);var l=s.getContext("2d");l.save(),i<=Math.PI/2?l.translate(h*s.oImage.height,0):i<=Math.PI?l.translate(s.width,-o*s.oImage.height):i<=1.5*Math.PI?l.translate(-o*s.oImage.width,s.height):l.translate(0,-h*s.oImage.width),l.rotate(i),l.drawImage(s.oImage,0,0,s.oImage.width,s.oImage.height),l.restore()}s.id=n.id,s.angle=n.angle,n.parentNode.replaceChild(s,n)}function selectFileImage(t,e,a){var r=t.files[0],n=null;if(r){console.log("正在上传,请稍后...");if(!/^(image\/jpeg|image\/png)$/i.test(r.type))return;EXIF.getData(r,function(){EXIF.getAllTags(this),n=EXIF.getTag(this,"Orientation")});var i=new FileReader;i.onload=function(t){var r=new Image;r.src=t.target.result,r.onload=function(){var t=this.naturalWidth,r=this.naturalHeight;this.naturalWidth>this.naturalHeight&&this.naturalWidth>800?(t=800,r=t*this.naturalHeight/this.naturalWidth):this.naturalHeight>this.naturalWidth&&this.naturalHeight>1200&&(r=1200,t=r*this.naturalWidth/this.naturalHeight);var i=document.createElement("canvas"),o=i.getContext("2d");i.width=t,i.height=r,o.drawImage(this,0,0,t,r);var h=null;if(navigator.userAgent.match(/iphone/i)){if(console.log("iphone"),""!=n&&1!=n)switch(n){case 6:rotateImg(this,"left",i);break;case 8:rotateImg(this,"right",i);break;case 3:rotateImg(this,"right",i),rotateImg(this,"right",i)}h=i.toDataURL("image/jpeg",.8)}else if(navigator.userAgent.match(/Android/i)){if(""!=n&&1!=n)switch(n){case 6:rotateImg(this,"left",i);break;case 8:rotateImg(this,"right",i);break;case 3:rotateImg(this,"right",i),rotateImg(this,"right",i)}h=i.toDataURL("image/jpeg",.8)}else{if(""!=n&&1!=n)switch(n){case 6:rotateImg(this,"left",i);break;case 8:rotateImg(this,"right",i);break;case 3:rotateImg(this,"right",i),rotateImg(this,"right",i)}h=i.toDataURL("image/jpeg",.8)}var s=new Image;s.src=h,$(s).attr("id","isUpPic"),e.empty(),e.append($(s)),s.onload=function(){if(s.naturalWidth>s.naturalHeight){var t="x";$(s).attr("style","height:100%;"),e.scrollLeft(1e5),scrollNum=e.scrollLeft();var r=scrollNum/2;e.scrollLeft(r),scrollNum=e.scrollLeft()}else{var t="y";$(s).attr("style","width:100%;"),e.scrollTop(1e5),scrollNum=e.scrollTop();var r=scrollNum/2;e.scrollTop(r),scrollNum=e.scrollTop()}a&&a($(s),t,r)}}},i.readAsDataURL(r)}}function rotateImg(t,e,a){if(null!=t){var r=t.height,n=t.width,i=2;null==i&&(i=0),"right"==e?++i>3&&(i=0):--i<0&&(i=3);var o=90*i*Math.PI/180,h=a.getContext("2d");switch(i){case 0:a.width=n,a.height=r,h.drawImage(t,0,0);break;case 1:a.width=r,a.height=n,h.rotate(o),h.drawImage(t,0,-r);break;case 2:a.width=n,a.height=r,h.rotate(o),h.drawImage(t,-n,-r);break;case 3:a.width=r,a.height=n,h.rotate(o),h.drawImage(t,-n,0)}}}function base64_encode(t){for(var e,a,r,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=t.length,h="";i<o;){if(e=255&t.charCodeAt(i++),i==o){h+=n.charAt(e>>2),h+=n.charAt((3&e)<<4),h+="==";break}if(a=t.charCodeAt(i++),i==o){h+=n.charAt(e>>2),h+=n.charAt((3&e)<<4|(240&a)>>4),h+=n.charAt((15&a)<<2),h+="=";break}r=t.charCodeAt(i++),h+=n.charAt(e>>2),h+=n.charAt((3&e)<<4|(240&a)>>4),h+=n.charAt((15&a)<<2|(192&r)>>6),h+=n.charAt(63&r)}return h}function base64_decode(t){for(var e,a,r,n,i=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),o=0,h=t.length,s="";o<h;){do{e=i[255&t.charCodeAt(o++)]}while(o<h&&-1==e);if(-1==e)break;do{a=i[255&t.charCodeAt(o++)]}while(o<h&&-1==a);if(-1==a)break;s+=String.fromCharCode(e<<2|(48&a)>>4);do{if(61==(r=255&t.charCodeAt(o++)))return s;r=i[r]}while(o<h&&-1==r);if(-1==r)break;s+=String.fromCharCode((15&a)<<4|(60&r)>>2);do{if(61==(n=255&t.charCodeAt(o++)))return s;n=i[n]}while(o<h&&-1==n);if(-1==n)break;s+=String.fromCharCode((3&r)<<6|n)}return s}function getQueryString(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null}function randomItem(t){var e=t.length;return t[Math.floor(Math.random()*(e-1e-6))]}function compareArray(t,e){if(!t)return!1;if(!e)return!1;if(t.length!=e.length)return!1;for(var a in t)if(t[a]instanceof Array&&e[a]instanceof Array){if(!compareArray(t[a],e[a]))return!1}else if(t[a]!=e[a])return!1;return!0}function getNowFormatDate(){var t=new Date,e=t.getMonth()+1,a=t.getDate(),r=t.getHours(),n=t.getMinutes(),i=t.getSeconds();return e<10&&(e="0"+e),a<10&&(a="0"+a),r<10&&(r="0"+r),n<10&&(n="0"+n),i<10&&(i="0"+i),t.getFullYear()+"-"+e+"-"+a+" "+r+":"+n+":"+i}function unique(t){for(var e=0;e<t.length;e++)for(var a=e+1;a<t.length;a++)t[e]==t[a]&&(t.splice(a,1),a--);return t}function thousandSeparators(t){"string"!=typeof t&&(t+="");var e=/\d{1,3}(?=(\d{3})+$)/g;return t.replace(/^(\d+)((\.\d+)?)$/,function(t,a,r){return a.replace(e,"$&,")+r})}var browser={versions:function(){var t=navigator.userAgent;navigator.appVersion;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Adr")>-1,iPhone:t.indexOf("iPhone")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:t.indexOf("MicroMessenger")>-1,qq:" qq"==t.match(/\sQQ/i)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};